(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"3sXc":function(e,t,a){e.exports=a.p+"static/photography-a494dd32719afbc3f957d99b71821109.jpeg"},"4iJj":function(e,t,a){e.exports=a.p+"static/digitalart-aa057ea2cb2ef829c50cf20014450f7f.jpeg"},JMMV:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("AO0C"),i=a("Wbzz");t.a=function(e){var t=e.image,a=e.title,n=e.description,o=e.link,c=void 0===o?null:o,u=e.handleSubscription,l=e.subscription;return r.a.createElement(s.k,{style:{maxWidth:"22rem",minWidth:"300px"}},r.a.createElement(s.c,{style:{marginBottom:"20px"}},r.a.createElement(s.e,{className:"img-fluid",src:t,alt:"",waves:!0}),r.a.createElement(s.d,null,r.a.createElement(s.g,null,a),r.a.createElement(s.f,null,n),c?r.a.createElement(s.b,{color:"info",onClick:function(){return Object(i.navigate)(c)}},'"Read"'):r.a.createElement(s.b,{color:"info",onClick:u},l?"Unsubscribe":"Subscribe"))))}},X3x9:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("AO0C");t.a=function(e){var t=e.title,a=e.titleColor,n=void 0===a?"mdb-color":a,i=e.children;return r.a.createElement(s.m,{maxWidth:"md",style:{paddingTop:"10vh",paddingBottom:"15vh"}},r.a.createElement(s.C,null,r.a.createElement(s.k,{md:"12",className:"mdb-color-text text-left"},r.a.createElement("h1",{className:"h1-responsive font-weight-bold text-center mb-0 pt-md-5 pt-5 "+n+"-text"},t),r.a.createElement("hr",{className:"hr-dark my-4 w-80"}),i)))}},Z7z5:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),s=(a("ls82"),a("HaE+")),i=a("q1tI"),o=a.n(i),c=a("Bl7J"),u=a("X3x9"),l=a("JMMV"),p=a("AO0C"),m=a("vDqi"),b=a.n(m),d=a("Wbzz"),h=a("wC9Q"),g=a("TESy"),f=function(){var e=Object(s.a)(r.a.mark((function e(t,a){var n,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={UserPoolId:"ap-southeast-2_r1O9a1mH9",ClientId:"51m0rfokmjb7ch5pr2go0mlshe"},s=new g.g(n),e.next=5,s.getCurrentUser();case 5:null!=(i=e.sent)&&i.getSession((function(e,n){if(e)console.log(e.message||JSON.stringify(e));else{var r,s,o=[];r="Photography"===t?"custom:photography_sub":"DigitalArt"===t?"custom:digitalart_sub":"custom:watercolour_sub",s="subscribe"===a?"Y":"N";var c=new g.f({Name:r,Value:s});o.push(c),i.updateAttributes(o,(function(e,t){e&&console.log(e.message||JSON.stringify(e))}))}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message||JSON.stringify(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}();t.default=function(){var e=Object(h.a)(),t=Object(i.useState)("Y"===e["custom:photography_sub"]),n=t[0],m=t[1],g=Object(i.useState)("Y"===e["custom:digitalart_sub"]),v=g[0],y=g[1],w=Object(i.useState)("Y"===e["custom:watercolour_sub"]),k=w[0],x=w[1];Object(i.useEffect)((function(){Object(h.c)()||Object(d.navigate)("/")}),[]);var E=[{name:a("3sXc"),key:"1",alt:"First slide",title:"Photography",description:"You will be notified when I upload new photos or have some photography tips to share.",topic:"Photography",subscription:n},{name:a("4iJj"),key:"2",alt:"Second slide",title:"Digital art",description:"I have a passion to digitally create paintings from photos. You will be notified when I upload new digital art or have new digital art tips to share.",topic:"DigitalArt",subscription:v},{name:a("mo5S"),key:"3",alt:"Third slide",title:"Watercolour painting",description:"I'm a watercolour painting beginner. Thanks to the amazing artists sharing their painting demos on YouTube, I've steadily made progress and thoroughly enjoyed it in the past few months. I'll upload my work and share the artists I follow.",topic:"Watercolour",subscription:k}],j=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,s,i,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Photography"===t?(a=n?"unsubscribe":"subscribe",s="You have successfully "+(n?"unsubscribed from":"subscribed to")+" Photography!",m(!n)):"DigitalArt"===t?(a=v?"unsubscribe":"subscribe",s="You have successfully "+(v?"unsubscribed from":"subscribed to")+" Digital art!",y(!v)):(a=k?"unsubscribe":"subscribe",s="You have successfully "+(k?"unsubscribed from":"subscribed to")+" Watercolour painting!",x(!k)),e.prev=1,i=firebase.messaging(),e.next=5,i.requestPermission();case 5:return console.log("Have permission"),e.next=8,i.getToken();case 8:return o=e.sent,"https://3yicy26rak.execute-api.ap-southeast-2.amazonaws.com/dev/api/messaging",c={method:"post",headers:{"Content-Type":"application/json"},url:"https://3yicy26rak.execute-api.ap-southeast-2.amazonaws.com/dev/api/messaging",data:{title:"",body:"",action:a,topic:t,token:o}},e.next=13,b()(c);case 13:e.sent,f(t,a),alert(s),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log("Error occurred: ",e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(c.a,null,o.a.createElement(u.a,{title:"Subscriptions"},o.a.createElement(p.C,{className:"m-0",center:!0},E.map((function(e){return o.a.createElement(l.a,{key:e.key,image:e.name,title:e.title,description:e.description,handleSubscription:function(){return j(e.topic)},subscription:e.subscription})})))))}},mo5S:function(e,t,a){e.exports=a.p+"static/watercolour-8b026a2e4341e407f908f2111a658fd4.jpeg"}}]);
//# sourceMappingURL=component---src-pages-subscription-js-6a554d864fe6dc5bcc47.js.map