{"version":3,"sources":["webpack:///./src/components/app-user.js","webpack:///./src/components/signin.js","webpack:///./src/pages/signin.js"],"names":["setUser","user","window","localStorage","gatsbyUser","JSON","stringify","SignIn","state","username","email","password","error","loading","handleUpdate","event","target","name","setState","value","login","e","a","preventDefault","Auth","signIn","currentAuthenticatedUser","userInfo","attributes","navigate","console","log","render","title","this","autoComplete","className","to","onClick","type","disabled","role","aria-hidden","style","marginTop","React","Component","Amplify","configure","config"],"mappings":"2OAEaA,EAAU,SAAAC,GAAI,OACxBC,OAAOC,aAAaC,WAAaC,KAAKC,UAAUL,I,4UCuFpCM,E,4JAjFbC,MAAQ,CACNC,SAAS,GACTC,MAAM,GACNC,SAAS,GACTC,MAAM,GACNC,SAAS,G,EAGXC,aAAe,SAAAC,GAAU,IAAD,EACa,EAAT,UAAtBA,EAAMC,OAAOC,MACf,EAAKC,WAAL,MACGH,EAAMC,OAAOC,MAAOF,EAAMC,OAAOG,MADpC,EAEEV,SAAUM,EAAMC,OAAOG,MAFzB,EAGEP,MAAO,GAHT,IAMF,EAAKM,WAAL,MACGH,EAAMC,OAAOC,MAAOF,EAAMC,OAAOG,MADpC,EAEEP,MAAO,GAFT,K,EAMFQ,M,6BAAQ,WAAMC,GAAN,uBAAAC,EAAA,6DACND,EAAEE,iBADI,EAEyB,EAAKf,MAA5BC,EAFF,EAEEA,SAAUE,EAFZ,EAEYA,SAFZ,SAIJ,EAAKO,SAAS,CAAEL,SAAS,IAJrB,SAKEW,IAAKC,OAAOhB,EAAUE,GALxB,uBAMea,IAAKE,2BANpB,OAMEzB,EANF,OAOE0B,EAPF,+BAQC1B,EAAK2B,YARN,IASFnB,SAAUR,EAAKQ,WAEjBT,EAAQ2B,GACR,EAAKT,SAAS,CAAEL,SAAS,IACzBgB,mBAAS,KAbL,kDAeJ,EAAKX,SAAS,CAAEN,MAAM,EAAD,GAAOC,SAAS,IACrCiB,QAAQC,IAAI,aAAZ,MAhBI,0D,kKAoBRC,OAAA,WAAU,IAAD,OACP,OACE,kBAAC,IAAD,CAAUC,MAAM,0BAA0BrB,MAAOsB,KAAK1B,MAAMI,OAC1D,kBAAC,IAAD,CACEE,aAAcoB,KAAKpB,aACnBJ,MAAOwB,KAAK1B,MAAME,MAClByB,aAAa,OAEf,kBAAC,IAAD,CACErB,aAAcoB,KAAKpB,aACnBH,SAAUuB,KAAK1B,MAAMG,SACrBwB,aAAa,OAEf,uBAAGC,UAAU,eAAb,yBACwB,kBAAC,OAAD,CAAMC,GAAG,UAAT,mBAExB,4BACEC,QAAS,SAAAjB,GAAC,OAAI,EAAKD,MAAMC,IACzBkB,KAAK,SACLH,UAAU,4BACVI,SAAUN,KAAK1B,MAAMK,SAEpBqB,KAAK1B,MAAMK,QAAU,KAAO,UAC5BqB,KAAK1B,MAAMK,SACV,0BACEuB,UAAU,mCACVK,KAAK,SACLC,cAAY,UAIlB,uBAAGC,MAAO,CAAEC,UAAW,IAAMR,UAAU,eAAvC,eACc,kBAAC,OAAD,CAAMC,GAAG,WAAT,qB,GA3EDQ,IAAMC,W,wBCD3BC,UAAQC,UAAUC,KAEH,4BAEX,kBAAC,EAAD","file":"component---src-pages-signin-js-a204f65e348dc345f557.js","sourcesContent":["const isBrowser = typeof window !== `undefined`\n\nexport const setUser = user =>\n  (window.localStorage.gatsbyUser = JSON.stringify(user))\n\nconst getUser = () => {\n  if (window.localStorage.gatsbyUser) {\n    let user = JSON.parse(window.localStorage.gatsbyUser)\n    return user ? user : {}\n  }\n  return {}\n}\n\nexport const isLoggedIn = () => {\n  if (!isBrowser) return false\n\n  const user = getUser()\n  if (user) return !!user.username\n}\n\nexport const getCurrentUser = () => isBrowser && getUser()\n\nexport const logout = callback => {\n  if (!isBrowser) return\n  setUser({})\n  callback()\n}\n","import React from 'react'\nimport { Link } from 'gatsby'\nimport { navigate } from '@reach/router'\nimport { Auth } from 'aws-amplify'\n\nimport { setUser } from './app-user'\nimport { AuthForm, Email, Password } from './auth-forms'\n\nclass SignIn extends React.Component {\n  state = {\n    username: ``,\n    email: ``,\n    password: ``,\n    error: ``,\n    loading: false,\n  }\n\n  handleUpdate = event => {\n    if (event.target.name === 'email') {\n      this.setState({\n        [event.target.name]: event.target.value,\n        username: event.target.value,\n        error: '',\n      })\n    }\n    this.setState({\n      [event.target.name]: event.target.value,\n      error: '',\n    })\n  }\n\n  login = async e => {\n    e.preventDefault()\n    const { username, password } = this.state\n    try {\n      this.setState({ loading: true })\n      await Auth.signIn(username, password)\n      const user = await Auth.currentAuthenticatedUser()\n      const userInfo = {\n        ...user.attributes,\n        username: user.username,\n      }\n      setUser(userInfo)\n      this.setState({ loading: false })\n      navigate('/')\n    } catch (err) {\n      this.setState({ error: err, loading: false })\n      console.log('error...: ', err)\n    }\n  }\n\n  render() {\n    return (\n      <AuthForm title=\"Sign in to your account\" error={this.state.error}>\n        <Email\n          handleUpdate={this.handleUpdate}\n          email={this.state.email}\n          autoComplete=\"on\"\n        />\n        <Password\n          handleUpdate={this.handleUpdate}\n          password={this.state.password}\n          autoComplete=\"on\"\n        />\n        <p className=\"text-center\">\n          Forgot your password? <Link to=\"/reset\">Reset password</Link>\n        </p>\n        <button\n          onClick={e => this.login(e)}\n          type=\"submit\"\n          className=\"btn btn-primary btn-block\"\n          disabled={this.state.loading}\n        >\n          {this.state.loading ? null : 'Sign In'}\n          {this.state.loading && (\n            <span\n              className=\"spinner-border spinner-border-sm\"\n              role=\"status\"\n              aria-hidden=\"true\"\n            />\n          )}\n        </button>\n        <p style={{ marginTop: 40 }} className=\"text-center\">\n          No account? <Link to=\"/signup\">Create account</Link>\n        </p>\n      </AuthForm>\n    )\n  }\n}\n\nexport default SignIn\n","\nimport React from 'react'\n// import '../components/layout'\n\nimport SignIn from '../components/signin'\nimport Amplify from 'aws-amplify'\nimport config from '../aws-exports'\nAmplify.configure(config);\n\nexport default () => (\n  // <Layout>\n    <SignIn/>\n  // </Layout>\n)\n"],"sourceRoot":""}