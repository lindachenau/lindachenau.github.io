{"version":3,"sources":["webpack:///./src/components/signin.js","webpack:///./src/pages/signin.js"],"names":["SignIn","state","username","email","password","error","loading","handleUpdate","event","target","name","setState","value","login","e","a","preventDefault","Auth","signIn","currentAuthenticatedUser","user","userInfo","attributes","setUser","navigate","console","log","render","title","this","autoComplete","className","to","onClick","type","disabled","role","aria-hidden","style","marginTop","React","Component","Amplify","configure","config"],"mappings":"+kBA0FeA,E,4JAjFbC,MAAQ,CACNC,SAAS,GACTC,MAAM,GACNC,SAAS,GACTC,MAAM,GACNC,SAAS,G,EAGXC,aAAe,SAAAC,GAAU,IAAD,EACa,EAAT,UAAtBA,EAAMC,OAAOC,MACf,EAAKC,WAAL,MACGH,EAAMC,OAAOC,MAAOF,EAAMC,OAAOG,MADpC,EAEEV,SAAUM,EAAMC,OAAOG,MAFzB,EAGEP,MAAO,GAHT,IAMF,EAAKM,WAAL,MACGH,EAAMC,OAAOC,MAAOF,EAAMC,OAAOG,MADpC,EAEEP,MAAO,GAFT,K,EAMFQ,M,6BAAQ,WAAMC,GAAN,uBAAAC,EAAA,6DACND,EAAEE,iBADI,EAEyB,EAAKf,MAA5BC,EAFF,EAEEA,SAAUE,EAFZ,EAEYA,SAFZ,SAIJ,EAAKO,SAAS,CAAEL,SAAS,IAJrB,SAKEW,IAAKC,OAAOhB,EAAUE,GALxB,uBAMea,IAAKE,2BANpB,OAMEC,EANF,OAOEC,EAPF,+BAQCD,EAAKE,YARN,IASFpB,SAAUkB,EAAKlB,WAEjBqB,YAAQF,GACR,EAAKV,SAAS,CAAEL,SAAS,IACzBkB,mBAAS,KAbL,kDAeJ,EAAKb,SAAS,CAAEN,MAAM,EAAD,GAAOC,SAAS,IACrCmB,QAAQC,IAAI,aAAZ,MAhBI,0D,kKAoBRC,OAAA,WAAU,IAAD,OACP,OACE,kBAAC,IAAD,CAAUC,MAAM,0BAA0BvB,MAAOwB,KAAK5B,MAAMI,OAC1D,kBAAC,IAAD,CACEE,aAAcsB,KAAKtB,aACnBJ,MAAO0B,KAAK5B,MAAME,MAClB2B,aAAa,OAEf,kBAAC,IAAD,CACEvB,aAAcsB,KAAKtB,aACnBH,SAAUyB,KAAK5B,MAAMG,SACrB0B,aAAa,OAEf,uBAAGC,UAAU,eAAb,yBACwB,kBAAC,OAAD,CAAMC,GAAG,UAAT,mBAExB,4BACEC,QAAS,SAAAnB,GAAC,OAAI,EAAKD,MAAMC,IACzBoB,KAAK,SACLH,UAAU,4BACVI,SAAUN,KAAK5B,MAAMK,SAEpBuB,KAAK5B,MAAMK,QAAU,KAAO,UAC5BuB,KAAK5B,MAAMK,SACV,0BACEyB,UAAU,mCACVK,KAAK,SACLC,cAAY,UAIlB,uBAAGC,MAAO,CAAEC,UAAW,IAAMR,UAAU,eAAvC,eACc,kBAAC,OAAD,CAAMC,GAAG,WAAT,qB,GA3EDQ,IAAMC,W,wBCD3BC,UAAQC,UAAUC,KAEH,4BACb,kBAAC,IAAD,KACE,kBAAC,EAAD","file":"component---src-pages-signin-js-ed226dfb05e0d731d45f.js","sourcesContent":["import React from 'react'\nimport { Link } from 'gatsby'\nimport { navigate } from '@reach/router'\nimport { Auth } from 'aws-amplify'\n\nimport { setUser } from './app-user'\nimport { AuthForm, Email, Password } from './auth-forms'\n\nclass SignIn extends React.Component {\n  state = {\n    username: ``,\n    email: ``,\n    password: ``,\n    error: ``,\n    loading: false,\n  }\n\n  handleUpdate = event => {\n    if (event.target.name === 'email') {\n      this.setState({\n        [event.target.name]: event.target.value,\n        username: event.target.value,\n        error: '',\n      })\n    }\n    this.setState({\n      [event.target.name]: event.target.value,\n      error: '',\n    })\n  }\n\n  login = async e => {\n    e.preventDefault()\n    const { username, password } = this.state\n    try {\n      this.setState({ loading: true })\n      await Auth.signIn(username, password)\n      const user = await Auth.currentAuthenticatedUser()\n      const userInfo = {\n        ...user.attributes,\n        username: user.username,\n      }\n      setUser(userInfo)\n      this.setState({ loading: false })\n      navigate('/')\n    } catch (err) {\n      this.setState({ error: err, loading: false })\n      console.log('error...: ', err)\n    }\n  }\n\n  render() {\n    return (\n      <AuthForm title=\"Sign in to your account\" error={this.state.error}>\n        <Email\n          handleUpdate={this.handleUpdate}\n          email={this.state.email}\n          autoComplete=\"on\"\n        />\n        <Password\n          handleUpdate={this.handleUpdate}\n          password={this.state.password}\n          autoComplete=\"on\"\n        />\n        <p className=\"text-center\">\n          Forgot your password? <Link to=\"/reset\">Reset password</Link>\n        </p>\n        <button\n          onClick={e => this.login(e)}\n          type=\"submit\"\n          className=\"btn btn-primary btn-block\"\n          disabled={this.state.loading}\n        >\n          {this.state.loading ? null : 'Sign In'}\n          {this.state.loading && (\n            <span\n              className=\"spinner-border spinner-border-sm\"\n              role=\"status\"\n              aria-hidden=\"true\"\n            />\n          )}\n        </button>\n        <p style={{ marginTop: 40 }} className=\"text-center\">\n          No account? <Link to=\"/signup\">Create account</Link>\n        </p>\n      </AuthForm>\n    )\n  }\n}\n\nexport default SignIn\n","\nimport React from 'react'\nimport Layout from '../components/layout'\n\nimport SignIn from '../components/signin'\nimport Amplify from 'aws-amplify'\nimport config from '../aws-exports'\nAmplify.configure(config);\n\nexport default () => (\n  <Layout>\n    <SignIn/>\n  </Layout>\n)\n"],"sourceRoot":""}